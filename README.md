# 雨が降るかを教えてくれるLINEbot

![image](https://user-images.githubusercontent.com/90116145/139619419-aa91e93e-5918-42b8-a60f-41e8eb25b7ad.png)

## 作成手順
- mac内にRuby on railsの環境構築
- MVCモデルに従って作成
- 作成したコードをherokuにデプロイ


## それぞれのファイル及びコードについて
### db/migrate/db/migrate/20210924060757_create_users.rb
データベースのマイグレーションファイル(データベースを生成する際の設計図になるもの。実行すると記述した内容に基づいたデータテーブルが生成される。)となっています。
usersデーブルを作成し
そこにLineIDを格納するためにline_idという名前のstringカラム(テーブルの列の部分,文字列が２５５字までの制限)を作成します。
また、値は絶対に入れなければならないためnull: falseでnull(空白)にならないように記述を行なっています

### lib/tasks/scheduler.rake
雨が降るかどうか調べてメッセージを送るという機能の内容が記されています。
.to_i　→データ型をinteger（整数）型に変換

### app/controller/linebot_controller.rb
MVCのアーキテクチャスタイルによりmodelの部分の役割を果たします
- LINEでメッセージが送られてきた際の返信を行う
- 友達登録した際のDBへのIDの登録
- 友達解除した際のDBからのIDの削除

## class,メソッドについての説明
- open-uri→http/ftp（ファイルを送受信する際のプロトコル） に簡単にアクセスするためのクラスでrubyのライブラリの一つ。
- Kconv→文字コードエンコーディング(データを一定の規則に基づいて符号化すること,他の形式に変更すること)を変換するためのモジュール（単独でも機能するが何かと組み合わせて使用されることが多いもの）
- multicast→userIdsを使用して複数のユーザーにメッセージを送信するメソッド
